<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:LLG.ViewModels"
             x:DataType="viewmodels:SettingsViewModel"
             x:Class="LLG.Views.SettingsPage"
             Title="Paramètres"
             BackgroundColor="#121212">

    <ScrollView>
        <VerticalStackLayout Spacing="25" Padding="25">

            <Grid ColumnDefinitions="*, Auto">
                <VerticalStackLayout Grid.Column="0" Spacing="5" VerticalOptions="Center">
                    <Label Text="Mon Profil" TextColor="White" FontSize="24" FontAttributes="Bold"/>
                    <Label Text="Gère tes informations personnelles" TextColor="Gray" FontSize="12"/>
                </VerticalStackLayout>

                <Button Grid.Column="1"
                        Command="{Binding ToggleEditModeCommand}"
                        BackgroundColor="#1E1E1E"
                        FontAttributes="Bold"
                        HeightRequest="40"
                        CornerRadius="10">

                    <Button.Triggers>
                        <DataTrigger TargetType="Button" Binding="{Binding IsEditing}" Value="False">
                            <Setter Property="Text" Value="Modifier" />
                            <Setter Property="TextColor" Value="{StaticResource PrimaryTeal}" />
                        </DataTrigger>

                        <DataTrigger TargetType="Button" Binding="{Binding IsEditing}" Value="True">
                            <Setter Property="Text" Value="Annuler" />
                            <Setter Property="TextColor" Value="#FF5252" />
                        </DataTrigger>
                    </Button.Triggers>

                </Button>
            </Grid>

            <Label Text="MON COMPTE" TextColor="Gray" FontSize="12" FontAttributes="Bold" Margin="5,0,0,0"/>

            <Border StrokeShape="RoundRectangle 10" BackgroundColor="#1E1E1E" StrokeThickness="0" Padding="15">
                <VerticalStackLayout Spacing="15">

                    <VerticalStackLayout Spacing="5">
                        <Label Text="Pseudo" TextColor="{StaticResource PrimaryTeal}" FontSize="12"/>
                        <Entry Text="{Binding UserName}" 
                               IsReadOnly="{Binding IsNotEditing}"
                               Placeholder="Ton pseudo..." 
                               PlaceholderColor="Gray" 
                               TextColor="White"/>
                    </VerticalStackLayout>

                    <BoxView HeightRequest="1" Color="#333" />

                    <VerticalStackLayout Spacing="5">
                        <Label Text="Email" TextColor="{StaticResource PrimaryTeal}" FontSize="12"/>
                        <Entry Text="{Binding UserEmail}" 
                               IsReadOnly="{Binding IsNotEditing}"
                               Keyboard="Email" 
                               Placeholder="exemple@email.com" 
                               PlaceholderColor="Gray" 
                               TextColor="White"/>
                    </VerticalStackLayout>

                    <BoxView HeightRequest="1" Color="#333" />

                    <VerticalStackLayout Spacing="5">
                        <Label Text="Mot de passe" TextColor="{StaticResource PrimaryTeal}" FontSize="12"/>
                        <Entry Text="{Binding UserPassword}" 
                               IsReadOnly="{Binding IsNotEditing}"
                               IsPassword="True" 
                               Placeholder="Modifier le mot de passe..." 
                               PlaceholderColor="Gray" 
                               TextColor="White"/>
                        <Label Text="Laisse vide pour conserver l'actuel" 
                               IsVisible="{Binding IsEditing}" 
                               FontSize="10" TextColor="Gray" FontAttributes="Italic"/>
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </Border>

            <Label Text="PHYSIQUE" TextColor="Gray" FontSize="12" FontAttributes="Bold" Margin="5,10,0,0"/>

            <Border StrokeShape="RoundRectangle 10" BackgroundColor="#1E1E1E" StrokeThickness="0" Padding="15">
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                    <VerticalStackLayout Grid.Column="0" Spacing="5">
                        <Label Text="Poids (kg)" TextColor="{StaticResource PrimaryTeal}" FontSize="12"/>
                        <Entry Text="{Binding UserWeight}" 
                               IsReadOnly="{Binding IsNotEditing}" 
                               Keyboard="Numeric" 
                               TextColor="White" 
                               HorizontalTextAlignment="Center" 
                               Placeholder="-"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Column="1" Spacing="5">
                        <Label Text="Taille (cm)" TextColor="{StaticResource PrimaryTeal}" FontSize="12"/>
                        <Entry Text="{Binding UserHeight}" 
                               IsReadOnly="{Binding IsNotEditing}" 
                               Keyboard="Numeric" 
                               TextColor="White" 
                               HorizontalTextAlignment="Center" 
                               Placeholder="-"/>
                    </VerticalStackLayout>
                </Grid>
            </Border>

            <Button Text="Enregistrer les modifications" 
                    Command="{Binding SaveDataCommand}"
                    IsVisible="{Binding IsEditing}"
                    BackgroundColor="{StaticResource PrimaryTeal}"
                    TextColor="White"
                    FontAttributes="Bold"
                    HeightRequest="50"
                    CornerRadius="25"
                    Margin="0,20,0,20"/>
            
            <Button Text="Se Déconnecter" Command="{Binding LogoutCommand}" BackgroundColor="#D32F2F" TextColor="White" Margin="0,10,0,30"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>